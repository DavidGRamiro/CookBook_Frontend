<app-navbar></app-navbar>
<div class="contenedor">
  <h1 class="titulo-seccion">Mi perfil</h1>
  <div class="contenedor-content">
    <div class="profile-container">
      <div class="imagen-usuario" *ngIf="usuario.imagen; else noImagen">
        <!-- Aquí se muestra la imagen del usuario -->
        <img [src]="usuario.imagen" alt="Imagen del usuario" />
      </div>
      <ng-template #noImagen>
        <img src="assets/img/usuario.png" alt="Imagen del usuario" />
      </ng-template>
      <div class="nombre-usuario">
        <!-- Aquí se muestra el nombre del usuario -->
        <h2>{{ usuario.username }}</h2>
        <p class="email-usuario">{{ usuario.email }}</p>
        <button class="editar-perfil-btn" (click)="editarPerfil()">Editar perfil</button>
      </div>
    </div>
    <div class="profile-tabs">
      <p-tabView [activeIndex]="activeIndex" (onChange)="cambiarComponenteActivo($event.index)">
        <p-tabPanel>
          <ng-template pTemplate="header">
            <div class="tab-header">
              <span class="tab-title">Mi plan </span>
              <i class="pi pi-calendar"></i>
            </div>
          </ng-template>
          <div *ngIf="usuarioConPlan">
            <app-mi-plan [usuarioConPlan]="usuarioConPlan" [usuario]="usuario"></app-mi-plan>
          </div>
        </p-tabPanel>
        <p-tabPanel>
          <ng-template pTemplate="header">
            <div class="tab-header">
              <span class="tab-title">Mis recetas favoritas </span>
              <i class="pi pi-heart"></i>
            </div>
          </ng-template>
          <app-mis-recetas-fav [recetasFavoritas]="recetasFavoritas"></app-mis-recetas-fav>
        </p-tabPanel>
        <p-tabPanel>
          <ng-template pTemplate="header">
            <div class="tab-header">
              <span class="tab-title">Mis recetas </span>
              <i class="pi pi-book"></i>
            </div>
          </ng-template>
          <app-mis-recetas [usuario]="usuario"></app-mis-recetas>
        </p-tabPanel>
        <p-tabPanel>
          <ng-template pTemplate="header">
            <div class="tab-header">
              <span class="tab-title">Notificaciones </span>
              <i class="pi pi-bell text-m" pBadge value="{{ notificacionesNuevas.length }}" [badgeDisabled]="notificacionesNuevas.length == 0"></i>
            </div>
          </ng-template>
          <app-notificaciones [notificaciones]="notificaciones"></app-notificaciones>
          <div *ngIf="notificacionesNuevas.length == 0">
            <p class="text-m">No tienes notificaciones nuevas</p>
          </div>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>
</div>
<app-footer></app-footer>
